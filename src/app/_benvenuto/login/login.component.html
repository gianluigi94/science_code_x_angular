<app-saturno [usaAnimazioniIngresso]="false" [usaAnimazioniScroll]="false">
</app-saturno>

<section class="login-contenuto" #loginContenuto>
  <ng-container *ngIf="(auth | async)?.tk === null">
    <form class="form-login" [formGroup]="reactiveForm" (ngSubmit)="accedi()">

      <!-- <h2 [innerHTML]="'ui.accesso.titolo' | translate"></h2> -->
     <h2>
  {{ 'ui.accesso.titolo.1' | translate }}
  <span>{{ 'ui.accesso.titolo.2' | translate }}</span>
</h2>


      <!-- LABEL SOPRA UTENTE (simula quella vecchia) -->
      <p class="label-sopra" [ngClass]="{
          'is-invalid':
            reactiveForm.controls['utente'].invalid &&
            (reactiveForm.controls['utente'].touched || formInviato)
        }"
        [innerHTML]="'ui.accesso.utente.label' | translate">
      </p>

      <!-- UTENTE con floating label -->
      <div class="campo-form">
        <input type="text" placeholder=" " name="utente" id="utente" formControlName="utente" [ngClass]="{
            'is-invalid':
              reactiveForm.controls['utente'].invalid &&
              (reactiveForm.controls['utente'].touched || formInviato)
          }" />

        <!-- nuova label che fluttua, con testo del vecchio placeholder -->
        <label for="utente" [ngClass]="{
            'is-invalid':
              reactiveForm.controls['utente'].invalid &&
              (reactiveForm.controls['utente'].touched || formInviato)
          }"
          [innerHTML]="'ui.accesso.utente.placeholder' | translate">
        </label>
      </div>


      <p class="errore-campo" *ngIf="
          reactiveForm.controls['utente'].invalid &&
          (reactiveForm.controls['utente'].touched || formInviato)
        " [innerHTML]="'ui.accesso.utente.error' | translate">
      </p>

      <!-- LABEL SOPRA PASSWORD -->
      <p class="label-sopra" [ngClass]="{
          'is-invalid':
            reactiveForm.controls['password'].invalid &&
            (reactiveForm.controls['password'].touched || formInviato)
        }">
        Password
      </p>

      <!-- PASSWORD con floating label + bottone occhio -->
      <div class="campo-form password-wrapper">

        <input [type]="mostraPassword ? 'text' : 'password'" placeholder=" " name="password" id="password"
          formControlName="password" [ngClass]="{
            'is-invalid': reactiveForm.controls['password'].invalid &&
                          (reactiveForm.controls['password'].touched ||
                           formInviato)
          }">

        <button type="button" class="toggle-password" (click)="mostraPassword = !mostraPassword"
          [attr.aria-label]="mostraPassword ? 'Nascondi password' : 'Mostra password'">

          <!-- Occhio "normale" quando la password è visibile -->
          <svg *ngIf="mostraPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
            aria-hidden="true" fill="#c4c4c4">
            <path
              d="M12 4C7 4 3.1 7.1 1.5 12 3.1 16.9 7 20 12 20s8.9-3.1 10.5-8C20.9 7.1 17 4 12 4Zm0 13a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z" />
            <circle cx="12" cy="12" r="2.5" />
          </svg>

          <!-- Occhio sbarrato quando la password è nascosta -->
          <svg *ngIf="!mostraPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
            aria-hidden="true" fill="#c4c4c4">
            <path
              d="M12 4C7 4 3.1 7.1 1.5 12 3.1 16.9 7 20 12 20s8.9-3.1 10.5-8C20.9 7.1 17 4 12 4Zm0 13a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z" />
            <circle cx="12" cy="12" r="2.5" />
            <!-- Barra diagonale -->
            <path d="M4 4L20 20" stroke="#c4c4c4" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>

        <!-- nuova label che fluttua, con testo del vecchio placeholder -->
        <label for="password" [ngClass]="{
            'is-invalid': reactiveForm.controls['password'].invalid &&
                          (reactiveForm.controls['password'].touched ||
                           formInviato)
          }"
          [innerHTML]="'ui.accesso.password.placeholder' | translate">
        </label>
      </div>

      <p class="errore-campo" *ngIf="
          reactiveForm.controls['password'].invalid &&
          (reactiveForm.controls['password'].touched || formInviato)
        " [innerHTML]="'ui.accesso.password.error' | translate">
      </p>
      <label class="check">
        <input type="checkbox" formControlName="restaCollegato" />
        <span [innerHTML]="'ui.accesso.collegato' | translate"></span>
      </label>

      <button class="accedi_btn" type="submit" [disabled]="!reactiveForm.valid || stoControllando">
        <span *ngIf="!stoControllando" [innerHTML]="'ui.accesso.bottone.label' | translate"></span>
        <app-spinner *ngIf="stoControllando"></app-spinner>
      </button>




    </form>
  </ng-container>
</section>

<app-footer></app-footer>
